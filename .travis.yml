language: cpp

matrix:
  include:
  - os: linux
    sudo: true
    dist: trusty
  - os: osx
    sudo: false
    osx_image: xcode7.3

env:
  global:
  - secure: AXHFIafTmbGDsHD3mUVj5a4I397DQjti/WoqAJGUp2PglxTcc04BwxZ9Z+xLuf5N2Hs5r9ojAJLT8OGxJCLBDXzneQTNSqXbFuYSLbqrEAiIRlA9eRIotWCg+wYcO+5e8MKX+cHVKwiIWasUB21AtCdq6msh6Y3pUshZp212VPg=
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    - llvm-toolchain-precise
    packages:
    - gcc-6
    - g++-6
    - qt5-default
    - libqt5opengl5-dev
    - xorg-dev
    - lib32stdc++6
    - clang-format-4.0

cache:
  directories:
  - "$HOME/.local"

install: "./.travis-deps.sh"
script: "./.travis-build.sh"
after_success: "./.travis-upload.sh"

deploy:
  provider: releases
  api_key:
    secure: rliUt23gEbbXKQcL0aIRClklaui6lLgEIPc+sjdWLIl1pE1e33y3gVV0PDXQnWtqXWP2yvmbfHNt/NZ8iDlGBVQUI42AIL4g7ow1YZ0ynKSyTf6JBd49V+hLQ9cOT+QX4vVylJZWHvEsXbZcVaPRp8EFjK20zBQAflKJGEStpHX/TrbAph3AXH3JZ6ek1974u4BOuf8o8NB2WPGl89LRNsOnUEZdT1ASOKfrndnOkJ+sw4zziBWKzhEQuBha0pcJyTPpDGGTCxn16UATt31CroJWrbZkDVvaUAwN8Okbx+m+ve9mTHeI+dFO7N3HNrFEXNt+5cthimsAcGO8B8+WkJEUZREYbT6V/D7ATlVzo9PcmFRNvxS+Uh0AXXTctx6MhkbW6nNBeP6H3xfPGHrHi0786H6Np/d+g05WEnVVVbWEST3WxnumO3YewVAZRCjuXepdGJWF67oVoLGYieMyR9A86qqmBDmcAY1NZxbrJs1mkZMS0aowkqGx854Z6m0cYArpKUmi6obr6z255fbAen7FIWjjwdGoT7FncImqnGbtuU6BslKd1jk9flRO06roSeQYtBQzMkG3re1MzAhEdUsokCCijUp55GyBnvr78Rti93Vv1tye2wC/Cw8DEs6FASZKX4P7QnvaIAX+XdNjwm00TnzZfBiyFT0CghV7gIg=
  file_glob: true
  file: "${HOME}/build/${TRAVIS_REPO_SLUG}/artifacts/*.tar.xz"
  skip_cleanup: true
  on:
    branch: master
    tags: true
